(this["webpackJsonpstudents-mern-app"]=this["webpackJsonpstudents-mern-app"]||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(23),c=n(2),r=n.n(c),o=n(6),i=n(7),l=function(e){return e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},u=n(3),j=function(e){var t=e.students,n=Object(u.g)();return Object(a.jsx)("div",{className:"students-list",children:(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return Object(a.jsxs)("div",{className:"card click",onClick:function(){return n.push("/students",e)},children:[Object(a.jsx)("p",{className:"card-title__main",children:e.name}),Object(a.jsx)("p",{className:"card-title__sec",children:e.college||" ~ "}),Object(a.jsx)("span",{children:l(new Date(e.dob))}),Object(a.jsx)("span",{className:"chip",children:e.identity})]},e._id)})):Object(a.jsx)("h2",{children:"No Students Yet :|"})})},d=n(4),b=n(10),p=function(e){var t=e.className,n=Object(b.a)(e,["className"]);return Object(a.jsx)("button",Object(d.a)({className:"primary click ".concat(t),type:"button"},n))},O=function(e){var t=e.className,n=void 0===t?"":t,s=Object(b.a)(e,["className"]);return Object(a.jsx)("button",Object(d.a)({className:"secondary click ".concat(n),type:"button"},s))},h=n.p+"static/media/arrow.8d435aeb.svg",m=function(){},x=function(e){var t=e.className,n=void 0===t?"":t,s=e.onClick,c=void 0===s?m:s,r=Object(b.a)(e,["className","onClick"]),o=Object(u.g)();return Object(a.jsx)("button",Object(d.a)(Object(d.a)({className:"click transparent back".concat(n),onClick:function(){o.push("/"),c()}},r),{},{children:Object(a.jsx)("img",{className:"empty",src:h,alt:"go back"})}))},f=n.p+"static/media/menu.78529502.svg",v=function(e){var t=e.className,n=void 0===t?"":t,s=Object(b.a)(e,["className"]);return Object(a.jsx)("button",Object(d.a)(Object(d.a)({className:"click transparent menu ".concat(n),type:"button"},s),{},{children:Object(a.jsx)("img",{className:"empty",src:f,alt:"menu button"})}))},g=n(1),y=n(12),w=n(25),N=n(26),k=n(27),S=n(28),C=function(e){Object(N.a)(n,e);var t=Object(k.a)(n);function n(){return Object(w.a)(this,n),t.apply(this,arguments)}return n}(Object(S.a)(Error)),A=function(e){var t=e.headers,n=e.status;if(!t.get("content-type").includes("application/json"))throw new C("Server Error.");if(401===n)throw new C("Seems you aren't logged in");if(400===n)throw new C("Bad Request. Unexpected?. Expected Data Expected")},L=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.fetch(t,n);case 3:return a=e.sent,A(a),e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(0),e.t0 instanceof C?alert(e.t0.message):console.error(e.t0),e.abrupt("return",{error:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),P={me:function(e){return L("/me",{method:"get",headers:{authorization:e}})},login:function(e){var t=e.name,n=e.password;return L("/auth",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({name:t,password:n})})},signup:function(e){var t=e.name,n=e.password,a=e.phone,s=e.dob,c=e.college,r=e.address,o=e.identity,i=e.note;return L("/students",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({name:t,password:n,phone:a,dob:s,college:c,address:r,identity:o,note:i})})},updateProfile:function(e){var t=e.token,n=e.note;return L("/me",{method:"put",headers:{"content-type":"application/json",authorization:t},body:JSON.stringify({note:n})})},deleteProfile:function(e){return L("/students",{method:"delete",headers:{authorization:e}})},getStudents:function(){return L("/students")}},D=Object(g.createContext)(null),E=function(e,t){return localStorage.setItem("token",t),t},I=function(e){var t=Object(g.useReducer)(E,"",(function(){return localStorage.getItem("token")||""})),n=Object(i.a)(t,2),s=n[0],c=n[1];return Object(a.jsx)(D.Provider,Object(d.a)({value:{token:s,setToken:c}},e))},F={isLogged:!1},R=Object(g.createContext)(null),B=function(e){var t=Object(g.useContext)(D),n=t.token,s=t.setToken,c=Object(g.useState)(F),l=Object(i.a)(c,2),u=l[0],j=l[1],b=Object(g.useReducer)((function(e){return++e}),0),p=Object(i.a)(b,2),O=p[0],h=p[1];Object(g.useEffect)((function(){(function(){var e=Object(o.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",j(F));case 2:return e.next=4,P.me(n);case 4:t=e.sent,a=t.student,t.error&&j(F),a&&j(Object(d.a)(Object(d.a)({},a),{},{isLogged:!0}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n,O]);var m=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.password,e.next=3,P.login({name:n,password:a});case 3:c=e.sent,(o=c.token)&&s(o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,c,o,i,l,u,j,d,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.password,c=t.phone,o=t.dob,i=t.college,l=t.address,u=t.identity,j=t.note,e.next=3,P.signup({name:n,password:a,phone:c,dob:o,college:i,address:l,identity:u,note:j});case 3:d=e.sent,(b=d.token)&&s(b);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.updateProfile({token:n,note:t});case 2:return a=e.sent,h(),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(R.Provider,Object(d.a)({value:{user:u,login:m,signup:x,updateNote:f,logout:function(){return s("")},deleteAccount:function(){window.confirm("Sure wanna delete this ".concat(u.name," Account?"))&&(P.deleteProfile(n).error||s(""))}}},e))},M=function(){return Object(g.useContext)(R)},U=function(e){var t=e.isMenuOpen,n=e.toggleMenu,s=e.className,c=void 0===s?"":s,r=M(),o=r.user,i=r.logout;return Object(a.jsx)("nav",{className:"".concat(c," ").concat(t?"open":""),onScroll:function(e){return e.preventDefault()},children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(x,{onClick:function(){return n(!1)}})}),Object(a.jsx)("li",{children:Object(a.jsx)(y.b,{to:"/",children:"Home"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://github.com/manu-xo5/students-mern-app",children:"Github"})}),Object(a.jsx)("li",{className:"hr",children:Object(a.jsx)("hr",{})}),Object(a.jsx)("li",{children:(null===o||void 0===o?void 0:o.isLogged)?Object(a.jsx)(y.b,{to:"/profile",children:"Account"}):Object(a.jsx)(y.b,{to:"/login",children:"Login / Sign Up"})}),Object(a.jsx)("li",{className:"hr",children:Object(a.jsx)("hr",{})}),o.isLogged&&Object(a.jsx)("li",{children:Object(a.jsx)(y.b,{to:"/",onClick:i,children:"Logout"})})]})})},J=function(e){var t=e.students;console.log(e);var n=Object(g.useReducer)((function(e,t){return null!==t&&void 0!==t?t:!e}),!1),s=Object(i.a)(n,2),c=s[0],r=s[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(U,{className:"mobile",isMenuOpen:c,toggleMenu:r}),Object(a.jsxs)("h1",{children:[Object(a.jsx)(v,{onClick:function(){return r(!0)}}),Object(a.jsx)("span",{children:"Students"}),Object(a.jsx)("div",{className:"empty"})]}),Object(a.jsx)(j,{students:t})]})},_=function(e){var t=e.reverse,n=void 0!==t&&t,s=Object(b.a)(e,["reverse"]);return M().user.isLogged===!n?Object(a.jsx)(u.b,Object(d.a)({},s)):Object(a.jsx)(u.a,{to:"/"})},q=(n(40),function(e){e.containerClass;var t=e.labelClass,n=void 0===t?"":t,s=e.className,c=void 0===s?"":s,r=e.as,o=void 0===r?"input":r,i=e.label,l=Object(b.a)(e,["containerClass","labelClass","className","as","label"]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{className:"field-label ".concat(n,"}"),htmlFor:l.id||l.name,children:i}),Object(a.jsx)(o,Object(d.a)({className:"field-input ".concat(c)},l))]})}),z=function(e){var t=e.history,n=M().login,s=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.target.elements,s=a.name,c=a.password,n({name:s.value,password:c.value});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h1",{children:[Object(a.jsx)(x,{}),Object(a.jsx)("span",{children:"Login"}),Object(a.jsx)("div",{className:"empty"})]}),Object(a.jsxs)("form",{onSubmit:s,children:[Object(a.jsx)(q,{label:"Name",name:"name",required:!0}),Object(a.jsx)(q,{label:"Password",name:"password",type:"password",required:!0}),Object(a.jsx)(p,{type:"submit",children:"Login"}),Object(a.jsx)(O,{onClick:function(){return t.push("/signup")},children:"Or Register"})]})]})},T=function(){var e=M(),t=e.user,n=e.updateNote,s=e.deleteAccount,c=Object(g.useState)(!1),l=Object(i.a)(c,2),u=l[0],j=l[1],d=function(){var e=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.elements.note.value,j(!0),e.next=5,n(a);case 5:j(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h1",{children:[Object(a.jsx)(x,{}),Object(a.jsx)("span",{children:"Profile"}),Object(a.jsx)("div",{className:"empty"})]}),Object(a.jsx)("p",{className:"profile-name",children:t.name}),Object(a.jsxs)("form",{onSubmit:d,children:[Object(a.jsx)(q,{label:"Phone",value:t.phone,disabled:!0}),Object(a.jsx)(q,{label:"DOB",value:t.dob,disabled:!0}),Object(a.jsx)(q,{label:"College",value:t.college,disabled:!0}),Object(a.jsx)(q,{label:"Address",value:t.address,disabled:!0}),Object(a.jsx)(q,{label:"Identity",value:t.identity,disabled:!0}),Object(a.jsx)(q,{as:"textarea",label:"Note to myself",name:"note",defaultValue:t.note}),Object(a.jsx)(p,{className:"submit-btn",type:"submit",disabled:u,children:"Update note"}),Object(a.jsx)(O,{onClick:s,children:"Delete Account"})]})]})},G=function(){return Object(a.jsx)("div",{className:"error-404",children:Object(a.jsxs)("h1",{children:[Object(a.jsx)(x,{}),Object(a.jsx)("span",{children:"404"}),Object(a.jsx)("div",{className:"empty"})]})})},H=function(e){var t=e.history,n=Object(g.useState)(!1),s=Object(i.a)(n,2),c=s[0],l=s[1],u=M().signup,j=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,s,c,o,i,j,d,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements,a=n.name,s=n.password,c=n.phone,o=n.dob,i=n.college,j=n.address,d=n.identity,b=n.note,l(!1),e.next=5,u({name:a.value,password:s.value,phone:c.value,dob:o.value,college:i.value,address:j.value,identity:d.value,note:b.value});case 5:l(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h1",{children:[Object(a.jsx)(x,{}),Object(a.jsx)("span",{children:"Sign Up"}),Object(a.jsx)("div",{className:"empty"})]}),Object(a.jsxs)("form",{onSubmit:j,children:[Object(a.jsx)(q,{label:"Name",name:"name"}),Object(a.jsx)(q,{label:"Password",name:"password",type:"password"}),Object(a.jsx)(q,{label:"Phone",name:"phone",type:"tel",inputMode:"tel"}),Object(a.jsx)(q,{label:"DOB (optional)",name:"dob",type:"date"}),Object(a.jsx)(q,{label:"College",name:"college"}),Object(a.jsx)(q,{label:"Address",name:"address"}),Object(a.jsxs)(q,{as:"select",label:"Identity",name:"identity",children:[Object(a.jsx)("option",{value:"AMERICAN",children:"America"}),Object(a.jsx)("option",{value:"ASIAN",children:"Asian"})]}),Object(a.jsx)(q,{as:"textarea",label:"Note to yourself (BIO)",name:"note"}),Object(a.jsx)(p,{type:"submit",disabled:c,children:"Register"}),Object(a.jsx)(O,{onClick:function(){return t.push("/login")},children:"Already have account?"})]})]})},V=function(e){var t=e[0],n=e.substr(1);return t.toUpperCase()+n},Y=function(e){var t=e.location,n=(e.history,t.state);return"object"!==typeof n?Object(a.jsx)(u.a,{to:"/"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h1",{children:[Object(a.jsx)(x,{}),Object(a.jsx)("span",{children:"Student"}),Object(a.jsx)("div",{className:"empty"})]}),Object(a.jsxs)("p",{className:"profile-name",children:[V(n.name),"'s profile"]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(q,{label:"Phone",value:n.phone,disabled:!0}),Object(a.jsx)(q,{label:"DOB",value:n.dob,disabled:!0}),Object(a.jsx)(q,{label:"College",value:n.college||" ~ ",disabled:!0}),Object(a.jsx)(q,{label:"Address",value:n.address||" ~ ",disabled:!0}),Object(a.jsx)(q,{label:"Identity",value:n.identity,disabled:!0}),Object(a.jsx)(q,{as:"textarea",label:"Note to ".concat(n.name),value:n.note||" ~ ",disabled:!0})]})]})},K=function(){var e=Object(g.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(g.useEffect)((function(){var e=function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getStudents();case 2:(null===(t=e.sent)||void 0===t?void 0:t.students)&&s(t.students);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("visibilitychange",e),e(),function(){return window.removeEventListener("visibilitychange",e)}}),[]),Object(a.jsx)(I,{children:Object(a.jsx)(B,{children:Object(a.jsxs)(y.a,{children:[Object(a.jsx)(U,{className:"desktop"}),Object(a.jsx)("main",{children:Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{path:"/",children:Object(a.jsx)(J,{students:n}),exact:!0}),Object(a.jsx)(u.b,{path:"/students",component:Y}),Object(a.jsx)(_,{path:"/profile",component:T}),Object(a.jsx)(_,{path:"/login",component:z,reverse:!0}),Object(a.jsx)(_,{path:"/signup",component:H,reverse:!0}),Object(a.jsx)(u.b,{path:"*",component:G})]})})]})})})};n(41);window.tap=function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=console).log.apply(e,n),n},Object(s.render)(Object(a.jsx)(K,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.48216c1a.chunk.js.map