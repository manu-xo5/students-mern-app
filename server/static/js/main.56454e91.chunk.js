(this["webpackJsonpstudents-mern-app"]=this["webpackJsonpstudents-mern-app"]||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(23),c=n(2),r=n.n(c),o=n(6),i=n(7),l=function(e){return e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},u=n(3),j=function(e){var t=e.students,n=Object(u.g)();return Object(s.jsx)("div",{className:"students-list",children:(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return Object(s.jsxs)("div",{className:"card click",onClick:function(){return n.push("/students",e)},children:[Object(s.jsx)("p",{className:"card-title__main",children:e.name}),Object(s.jsx)("p",{className:"card-title__sec",children:e.college||" ~ "}),Object(s.jsx)("span",{children:l(new Date(e.dob))}),Object(s.jsx)("span",{className:"chip",children:e.identity})]},e._id)})):Object(s.jsx)("h2",{children:"No Students Yet :|"})})},d=n(4),b=n(10),p=function(e){var t=e.className,n=Object(b.a)(e,["className"]);return Object(s.jsx)("button",Object(d.a)({className:"primary click ".concat(t),type:"button"},n))},O=function(e){var t=e.className,n=void 0===t?"":t,a=Object(b.a)(e,["className"]);return Object(s.jsx)("button",Object(d.a)({className:"secondary click ".concat(n),type:"button"},a))},h=n.p+"static/media/arrow.8d435aeb.svg",m=function(){},x=function(e){var t=e.className,n=void 0===t?"":t,a=e.onClick,c=void 0===a?m:a,r=Object(b.a)(e,["className","onClick"]),o=Object(u.g)();return Object(s.jsx)("button",Object(d.a)(Object(d.a)({className:"click transparent back".concat(n),onClick:function(){o.push("/"),c()}},r),{},{children:Object(s.jsx)("img",{className:"empty",src:h,alt:"go back"})}))},f=n.p+"static/media/menu.78529502.svg",v=function(e){var t=e.className,n=void 0===t?"":t,a=Object(b.a)(e,["className"]);return Object(s.jsx)("button",Object(d.a)(Object(d.a)({className:"click transparent menu ".concat(n),type:"button"},a),{},{children:Object(s.jsx)("img",{className:"empty",src:f,alt:"menu button"})}))},g=n(1),y=n(12),w=n(25),N=n(26),k=n(27),S=n(28),C=function(e){Object(N.a)(n,e);var t=Object(k.a)(n);function n(){return Object(w.a)(this,n),t.apply(this,arguments)}return n}(Object(S.a)(Error)),A=function(e){var t=e.headers,n=e.status;if(!t.get("content-type").includes("application/json"))throw new C("Server Error.");if(401===n)throw new C("Seems you aren't logged in");if(400===n)throw new C("Bad Request. Unexpected?. Expected Data Expected")},L=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.fetch(t,n);case 3:return s=e.sent,A(s),e.next=7,s.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(0),e.t0 instanceof C?alert(e.t0.message):console.error(e.t0),e.abrupt("return",{error:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),P={me:function(e){return L("/me",{method:"get",headers:{authorization:e}})},login:function(e){var t=e.name,n=e.password;return L("/auth",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({name:t,password:n})})},signup:function(e){var t=e.name,n=e.password,s=e.phone,a=e.dob,c=e.college,r=e.address,o=e.identity,i=e.note;return L("/students",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({name:t,password:n,phone:s,dob:a,college:c,address:r,identity:o,note:i})})},updateProfile:function(e){var t=e.token,n=e.note;return L("/me",{method:"put",headers:{"content-type":"application/json",authorization:t},body:JSON.stringify({note:n})})},deleteProfile:function(e){return L("/students",{method:"delete",headers:{authorization:e}})},getStudents:function(){return L("/students")}},D=Object(g.createContext)(null),E=function(e){var t=Object(g.useState)("default-token"),n=Object(i.a)(t,2),a=n[0],c=n[1];return Object(s.jsx)(D.Provider,Object(d.a)({value:{token:a,setToken:c}},e))},F={isLogged:!1},I=Object(g.createContext)(null),B=function(e){var t=Object(g.useContext)(D),n=t.token,a=t.setToken,c=Object(g.useState)(F),l=Object(i.a)(c,2),u=l[0],j=l[1],b=Object(g.useReducer)((function(e){return++e}),0),p=Object(i.a)(b,2),O=p[0],h=p[1];Object(g.useEffect)((function(){(function(){var e=Object(o.a)(r.a.mark((function e(){var t,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",j(F));case 2:return e.next=4,P.me(n);case 4:t=e.sent,s=t.student,t.error&&j(F),s&&j(Object(d.a)(Object(d.a)({},s),{},{isLogged:!0}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n,O]);var m=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,s,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,s=t.password,e.next=3,P.login({name:n,password:s});case 3:c=e.sent,(o=c.token)&&a(o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,s,c,o,i,l,u,j,d,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,s=t.password,c=t.phone,o=t.dob,i=t.college,l=t.address,u=t.identity,j=t.note,e.next=3,P.signup({name:n,password:s,phone:c,dob:o,college:i,address:l,identity:u,note:j});case 3:d=e.sent,(b=d.token)&&a(b);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.updateProfile({token:n,note:t});case 2:return s=e.sent,h(),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsx)(I.Provider,Object(d.a)({value:{user:u,login:m,signup:x,updateNote:f,logout:function(){return a("")},deleteAccount:function(){window.confirm("Sure wanna delete this ".concat(u.name," Account?"))&&(P.deleteProfile(n).error||a(""))}}},e))},M=function(){return Object(g.useContext)(I)},R=function(e){var t=e.isMenuOpen,n=e.toggleMenu,a=e.className,c=void 0===a?"":a,r=M(),o=r.user,i=r.logout;return Object(s.jsx)("nav",{className:"".concat(c," ").concat(t?"open":""),onScroll:function(e){return e.preventDefault()},children:Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(x,{onClick:function(){return n(!1)}})}),Object(s.jsx)("li",{children:Object(s.jsx)(y.b,{to:"/",children:"Home"})}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"https://github.com/manu-xo5/students-mern-app",children:"Github"})}),Object(s.jsx)("li",{className:"hr",children:Object(s.jsx)("hr",{})}),Object(s.jsx)("li",{children:(null===o||void 0===o?void 0:o.isLogged)?Object(s.jsx)(y.b,{to:"/profile",children:"Account"}):Object(s.jsx)(y.b,{to:"/login",children:"Login / Sign Up"})}),Object(s.jsx)("li",{className:"hr",children:Object(s.jsx)("hr",{})}),o.isLogged&&Object(s.jsx)("li",{children:Object(s.jsx)(y.b,{to:"/",onClick:i,children:"Logout"})})]})})},U=function(e){var t=e.students;console.log(e);var n=Object(g.useReducer)((function(e,t){return null!==t&&void 0!==t?t:!e}),!1),a=Object(i.a)(n,2),c=a[0],r=a[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(R,{className:"mobile",isMenuOpen:c,toggleMenu:r}),Object(s.jsxs)("h1",{children:[Object(s.jsx)(v,{onClick:function(){return r(!0)}}),Object(s.jsx)("span",{children:"Students"}),Object(s.jsx)("div",{className:"empty"})]}),Object(s.jsx)(j,{students:t})]})},J=function(e){var t=e.reverse,n=void 0!==t&&t,a=Object(b.a)(e,["reverse"]);return M().user.isLogged===!n?Object(s.jsx)(u.b,Object(d.a)({},a)):Object(s.jsx)(u.a,{to:"/"})},_=(n(40),function(e){e.containerClass;var t=e.labelClass,n=void 0===t?"":t,a=e.className,c=void 0===a?"":a,r=e.as,o=void 0===r?"input":r,i=e.label,l=Object(b.a)(e,["containerClass","labelClass","className","as","label"]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("label",{className:"field-label ".concat(n,"}"),htmlFor:l.id||l.name,children:i}),Object(s.jsx)(o,Object(d.a)({className:"field-input ".concat(c)},l))]})}),q=function(e){var t=e.history,n=M().login,a=function(){var e=Object(o.a)(r.a.mark((function e(t){var s,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s=t.target.elements,a=s.name,c=s.password,n({name:a.value,password:c.value});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("h1",{children:[Object(s.jsx)(x,{}),Object(s.jsx)("span",{children:"Login"}),Object(s.jsx)("div",{className:"empty"})]}),Object(s.jsxs)("form",{onSubmit:a,children:[Object(s.jsx)(_,{label:"Name",name:"name",required:!0}),Object(s.jsx)(_,{label:"Password",name:"password",type:"password",required:!0}),Object(s.jsx)(p,{type:"submit",children:"Login"}),Object(s.jsx)(O,{onClick:function(){return t.push("/signup")},children:"Or Register"})]})]})},z=function(){var e=M(),t=e.user,n=e.updateNote,a=e.deleteAccount,c=Object(g.useState)(!1),l=Object(i.a)(c,2),u=l[0],j=l[1],d=function(){var e=Object(o.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=t.target.elements.note.value,j(!0),e.next=5,n(s);case 5:j(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("h1",{children:[Object(s.jsx)(x,{}),Object(s.jsx)("span",{children:"Profile"}),Object(s.jsx)("div",{className:"empty"})]}),Object(s.jsx)("p",{className:"profile-name",children:t.name}),Object(s.jsxs)("form",{onSubmit:d,children:[Object(s.jsx)(_,{label:"Phone",value:t.phone,disabled:!0}),Object(s.jsx)(_,{label:"DOB",value:t.dob,disabled:!0}),Object(s.jsx)(_,{label:"College",value:t.college,disabled:!0}),Object(s.jsx)(_,{label:"Address",value:t.address,disabled:!0}),Object(s.jsx)(_,{label:"Identity",value:t.identity,disabled:!0}),Object(s.jsx)(_,{as:"textarea",label:"Note to myself",name:"note",defaultValue:t.note}),Object(s.jsx)(p,{className:"submit-btn",type:"submit",disabled:u,children:"Update note"}),Object(s.jsx)(O,{onClick:a,children:"Delete Account"})]})]})},T=function(){return Object(s.jsx)("div",{className:"error-404",children:Object(s.jsxs)("h1",{children:[Object(s.jsx)(x,{}),Object(s.jsx)("span",{children:"404"}),Object(s.jsx)("div",{className:"empty"})]})})},G=function(e){var t=e.history,n=Object(g.useState)(!1),a=Object(i.a)(n,2),c=a[0],l=a[1],u=M().signup,j=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,s,a,c,o,i,j,d,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements,s=n.name,a=n.password,c=n.phone,o=n.dob,i=n.college,j=n.address,d=n.identity,b=n.note,l(!1),e.next=5,u({name:s.value,password:a.value,phone:c.value,dob:o.value,college:i.value,address:j.value,identity:d.value,note:b.value});case 5:l(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("h1",{children:[Object(s.jsx)(x,{}),Object(s.jsx)("span",{children:"Sign Up"}),Object(s.jsx)("div",{className:"empty"})]}),Object(s.jsxs)("form",{onSubmit:j,children:[Object(s.jsx)(_,{label:"Name",name:"name"}),Object(s.jsx)(_,{label:"Password",name:"password",type:"password"}),Object(s.jsx)(_,{label:"Phone",name:"phone",type:"tel",inputMode:"tel"}),Object(s.jsx)(_,{label:"DOB (optional)",name:"dob",type:"date"}),Object(s.jsx)(_,{label:"College",name:"college"}),Object(s.jsx)(_,{label:"Address",name:"address"}),Object(s.jsxs)(_,{as:"select",label:"Identity",name:"identity",children:[Object(s.jsx)("option",{value:"AMERICAN",children:"America"}),Object(s.jsx)("option",{value:"ASIAN",children:"Asian"})]}),Object(s.jsx)(_,{as:"textarea",label:"Note to yourself (BIO)",name:"note"}),Object(s.jsx)(p,{type:"submit",disabled:c,children:"Register"}),Object(s.jsx)(O,{onClick:function(){return t.push("/login")},children:"Already have account?"})]})]})},H=function(e){var t=e[0],n=e.substr(1);return t.toUpperCase()+n},V=function(e){var t=e.location,n=(e.history,t.state);return"object"!==typeof n?Object(s.jsx)(u.a,{to:"/"}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("h1",{children:[Object(s.jsx)(x,{}),Object(s.jsx)("span",{children:"Student"}),Object(s.jsx)("div",{className:"empty"})]}),Object(s.jsxs)("p",{className:"profile-name",children:[H(n.name),"'s profile"]}),Object(s.jsxs)("div",{children:[Object(s.jsx)(_,{label:"Phone",value:n.phone,disabled:!0}),Object(s.jsx)(_,{label:"DOB",value:n.dob,disabled:!0}),Object(s.jsx)(_,{label:"College",value:n.college||" ~ ",disabled:!0}),Object(s.jsx)(_,{label:"Address",value:n.address||" ~ ",disabled:!0}),Object(s.jsx)(_,{label:"Identity",value:n.identity,disabled:!0}),Object(s.jsx)(_,{as:"textarea",label:"Note to ".concat(n.name),value:n.note||" ~ ",disabled:!0})]})]})},Y=function(){var e=Object(g.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(g.useEffect)((function(){var e=function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getStudents();case 2:(null===(t=e.sent)||void 0===t?void 0:t.students)&&a(t.students);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("visibilitychange",e),e(),function(){return window.removeEventListener("visibilitychange",e)}}),[]),Object(s.jsx)(E,{children:Object(s.jsx)(B,{children:Object(s.jsxs)(y.a,{children:[Object(s.jsx)(R,{className:"desktop"}),Object(s.jsx)("main",{children:Object(s.jsxs)(u.d,{children:[Object(s.jsx)(u.b,{path:"/",children:Object(s.jsx)(U,{students:n}),exact:!0}),Object(s.jsx)(u.b,{path:"/students",component:V}),Object(s.jsx)(J,{path:"/profile",component:z}),Object(s.jsx)(J,{path:"/login",component:q,reverse:!0}),Object(s.jsx)(J,{path:"/signup",component:G,reverse:!0}),Object(s.jsx)(u.b,{path:"*",component:T})]})})]})})})};n(41);window.tap=function(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(e=console).log.apply(e,n),n},Object(a.render)(Object(s.jsx)(Y,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.56454e91.chunk.js.map